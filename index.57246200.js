!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},o={},a=t.parcelRequired7c6;null==a&&((a=function(e){if(e in n)return n[e].exports;if(e in o){var t=o[e];delete o[e];var a={id:e,exports:{}};return n[e]=a,t.call(a.exports,a,a.exports),a.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){o[e]=t},t.parcelRequired7c6=a),a("iE7OH").register(JSON.parse('{"9p9yL":"index.57246200.js","aogqn":"pop-up-shop-1.06fa7713.png","4I5XU":"pop-up-shop-2.57ecc8dc.png","243JW":"pop-up-shop-3.e5effbae.png","8HuFU":"index.b0f20763.js"}')),a("i8Q71");var r,c=a("bpxeT"),s=a("2TvXO"),i=a("jos2x");r=a("aNJCr").getBundleURL("9p9yL")+a("iE7OH").resolve("aogqn");var l;l=a("aNJCr").getBundleURL("9p9yL")+a("iE7OH").resolve("4I5XU");var d;d=a("aNJCr").getBundleURL("9p9yL")+a("iE7OH").resolve("243JW");var u,p=document.querySelector(".modal-close-btn"),m=document.querySelector(".modal-window"),h=document.querySelector(".backdrop"),f=document.querySelector(".modal-content");document.querySelector(".books-container").addEventListener("click",(function(e){var t=e.target.closest(".book-item");if(!t)return;var n=t.getAttribute("data-id");n&&(console.log("Клік на книзі з ID:",n),function(e){v.apply(this,arguments)}(n))})),m.addEventListener("click",(function(e){e.stopPropagation()}));var b;function g(){document.body.style.overflow="visible"}function v(){return(v=e(c)(e(s).mark((function t(n){var o,a,r,c,l,d;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,i.fetchBookById)(n);case 3:o=e.sent,u=o,a=JSON.parse(localStorage.getItem("shopping-list"))||[],r=a.some((function(e){return e._id===o._id})),c=x(o),f.innerHTML=c,m.classList.remove("is-hidden"),y(),p.addEventListener("click",E),h.addEventListener("click",E),document.addEventListener("keydown",S),(l=document.querySelector(".modal-btn-add")).addEventListener("click",k),d=document.querySelector(".modal-note"),r?(l.textContent="REMOVE FROM THE SHOPPING LIST",d.textContent="Congratulations! You have added the book to the shopping list. To delete, press the button “Remove from the shopping list”."):(l.textContent="ADD TO SHOPPING LIST",d.textContent=""),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(0),console.error("Помилка завантаження даних книги:",e.t0),u={};case 24:case"end":return e.stop()}}),t,null,[[0,20]])})))).apply(this,arguments)}function k(){if(u){var e=u,t=JSON.parse(localStorage.getItem("shopping-list"))||[];if(t.some((function(t){return t._id===e._id}))){var n=t.filter((function(t){return t._id!==e._id}));localStorage.setItem("shopping-list",JSON.stringify(n)),document.querySelector(".modal-btn-add").textContent="ADD TO SHOPPING LIST",document.querySelector(".modal-note").textContent=""}else{t.push(e),localStorage.setItem("shopping-list",JSON.stringify(t)),document.querySelector(".modal-btn-add").textContent="REMOVE FROM THE SHOPPING LIST",document.querySelector(".modal-note").textContent="Congratulations! You have added the book to the shopping list. To delete, press the button “Remove from the shopping list”."}}else console.error("Дані про книгу відсутні.")}(b=localStorage.getItem("shopping-list"))&&JSON.parse(b);function y(){console.log("Модальне вікно відкрито"),h.classList.remove("is-hidden"),m.classList.remove("is-hidden"),document.body.style.overflow="hidden",document.querySelector(".modal-btn-add").textContent="ADD TO SHOPPING LIST"}function L(e){e.target===h&&e.target!==m&&E()}function S(e){"Escape"===e.key&&E()}function E(){m.classList.add("is-hidden"),h.classList.add("is-hidden"),g(),document.removeEventListener("keydown",S),h.removeEventListener("click",L)}function x(t){var n=t.book_image,o=t.list_name,a=t.author,c=t.description,s=t.buy_links;return'<div class="modal-content">\n      <img class="modal-book-img"\n              src="'.concat(n,'"\n              alt="Book cover"\n            />\n            <div class="modal-book-descr">\n              <h2 class="modal-book-title">').concat(o,'</h2>\n              <h3 class="modal-book-author">').concat(a,'</h3>\n\n          <p class="modal-book-review">').concat(c,'</p>\n        <ul class="modal-book-list list">\n          <li class="modal-book-el">\n            <a\n              href="').concat(s[0].url,'"\n              class="modal-book-link"\n              target="_blank"\n              rel="noopener no-referrer"\n              >\n              <img\n              src="').concat(e(r),'"\n              alt="Buy on Amazon"\n              width="62"\n              height="19"\n              class="modal-book-seller amazon"\n            /></a>\n          </li>\n          <li class="modal-book-el">\n            <a\n              href="').concat(s[1].url,'"\n              class="modal-book-link"\n              target="_blank"\n              rel="noopener no-referrer"\n              ><img\n              src="').concat(e(l),'"\n              alt="Buy on Apple"\n              width="33"\n              height="32"\n              class="modal-book-seller"\n            /></a>\n          </li>\n          <li class="modal-book-el">\n            <a\n              href="').concat(s[4].url,'"\n              class="modal-book-link"\n              target="_blank"\n              rel="noopener no-referrer"\n            >\n              <img\n\n              src="').concat(e(d),'"\n              alt="Book shop"\n              width="38"\n              height="36"\n              class="modal-book-seller "\n            /></a>\n          </li>\n        </ul>\n      </div>')}p.addEventListener("click",(function(){E(),g()})),h.addEventListener("click",L),document.addEventListener("keydown",S),a("23Ajj");c=a("bpxeT"),s=a("2TvXO"),i=a("jos2x");function C(){var e=document.querySelector(".books-container");fetch("https://books-backend.p.goit.global/books/category-list").then((function(e){return e.json()})).then((function(t){var n=document.createElement("ul");n.classList.add("list"),n.classList.add("categories-list"),t.forEach((function(e){var t=document.createElement("li");t.classList.add("category");var o=document.createElement("h3");o.textContent=e.list_name,o.classList.add("category-item"),t.appendChild(o),fetch("https://books-backend.p.goit.global/books/category?category=".concat(e.list_name)).then((function(e){return e.json()})).then((function(e){var n=e;if(n.length>0){var o=document.createElement("ul");if(o.classList.add("card-set"),o.classList.add("book-list"),n.slice(0,5).forEach((function(e){var t=_(e);o.appendChild(t)})),t.appendChild(o),document.querySelectorAll(".card-set-item").forEach((function(e){e.addEventListener("click",(function(){}))})),n.length>5){var a=document.createElement("button");a.classList.add("btn"),a.textContent="See More",a.classList.add("see-more-button"),t.appendChild(a),a.addEventListener("click",(function(){var e=t.querySelector(".card-set");n.slice(5).forEach((function(t){var n=_(t);e.appendChild(n)})),a.remove()}))}}else{var r=document.createElement("p");r.textContent="Немає популярних книг для цієї категорії",t.appendChild(r)}})).catch((function(t){console.log('Сталася помилка при отриманні даних для категорії "'.concat(e.list_name,'" з API:'),t)})),n.appendChild(t)})),e.appendChild(n)})).catch((function(e){console.log("Сталася помилка при отриманні даних з API:",e)}))}function _(e){var t=document.createElement("li");t.classList.add("card-set-item"),t.classList.add("book-item"),t.classList.add("link"),t.dataset.id="".concat(e._id);var n=document.createElement("img");n.src=e.book_image,n.alt=e.title,n.classList.add("book-image"),t.appendChild(n);var o=document.createElement("h4");o.textContent=e.title,o.classList.add("book-title"),o.classList.add("ellipsis"),t.appendChild(o);var a=document.createElement("p");return a.textContent=e.author,a.classList.add("book-author"),a.classList.add("ellipsis"),t.appendChild(a),t}a("jos2x"),document.addEventListener("DOMContentLoaded",C);document.querySelector(".side-bar");var H=document.querySelector(".side-bar-list"),O=(document.querySelector(".books-container"),document.querySelector(".card-set")),q=document.querySelector(".best-sellers > h2");function T(){return T=e(c)(e(s).mark((function t(){var n;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.fetchCategoryList)();case 2:n=e.sent,'<li><button class="side-bar-btn current-category" type="button" data-all-categories>All categories</button></li>',H.insertAdjacentHTML("afterbegin",'<li><button class="side-bar-btn current-category" type="button" data-all-categories>All categories</button></li>'),document.querySelector("[data-all-categories]").addEventListener("click",C),w(n);case 8:case"end":return e.stop()}}),t)}))),T.apply(this,arguments)}function w(e){var t=e.map((function(e){var t=e.list_name;return'<li><button type="button" class="side-bar-btn">'.concat(t,"</button></li>")})).join("");return H.insertAdjacentHTML("beforeend",t)}function I(){return I=e(c)(e(s).mark((function t(n){var o,a;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.fetchParticularCategory)(n);case 2:return o=e.sent,a=o.map((function(e){var t=e.book_image,n=e.title,o=e.author,a=e._id;return'<li class="card-set-item" data-id="'.concat(a,'">\n\t <button class="side-bar-btn" type="button"><div class="wrapper-img"><img class="card-set-img" src="').concat(t,'" alt=""></div>\n\t  <p class="card-set-title">').concat(n,'</p>\n\t  <p class="card-set-author">').concat(o,"</p></li></button>")})).join(""),e.abrupt("return",O.innerHTML=a);case 5:case"end":return e.stop()}}),t)}))),I.apply(this,arguments)}!function(){T.apply(this,arguments)}(),H.addEventListener("click",(function(e){var t=e.target.textContent,n=document.querySelector(".categories-list");q.innerHTML="",n.innerHTML="",function(e){I.apply(this,arguments)}(t)})),a("xpKCW"),a("cs7FV"),a("jos2x");(0,a("cmach").setActivePage)("home")}();
//# sourceMappingURL=index.57246200.js.map
