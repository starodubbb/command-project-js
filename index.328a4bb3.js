function t(t){return t&&t.__esModule?t.default:t}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},o={},s=e.parcelRequired7c6;null==s&&((s=function(t){if(t in n)return n[t].exports;if(t in o){var e=o[t];delete o[t];var s={id:t,exports:{}};return n[t]=s,e.call(s.exports,s,s.exports),s.exports}var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(t,e){o[t]=e},e.parcelRequired7c6=s),s("kyEFX").register(JSON.parse('{"7bk21":"index.328a4bb3.js","gIJxI":"pop-up-shop-1.06fa7713.png","hZaf5":"pop-up-shop-2.57ecc8dc.png","3u4at":"pop-up-shop-3.e5effbae.png","W511b":"index.9e294144.js"}')),s("bUb57");var a,r=s("d1cSn");a=new URL(s("kyEFX").resolve("gIJxI"),import.meta.url).toString();var c;c=new URL(s("kyEFX").resolve("hZaf5"),import.meta.url).toString();var i;i=new URL(s("kyEFX").resolve("3u4at"),import.meta.url).toString();const l=document.querySelector(".modal-close-btn"),d=document.querySelector(".modal-window"),u=document.querySelector(".backdrop");let m,p=document.querySelector(".modal-content");document.querySelector(".books-container").addEventListener("click",(function(e){const n=e.target.closest(".card-set-item");if(!n)return;const o=n.getAttribute("data-id");o&&async function(e){try{const n=await(0,r.fetchBookById)(e);m=n;const o=(JSON.parse(localStorage.getItem("shopping-list"))||[]).some((t=>t._id===n._id)),s=function(e){const{book_image:n,list_name:o,author:s,description:r,buy_links:l}=e;return`<div class="modal-content">\n      <img class="modal-book-img"\n              src="${n}"\n              alt="Book cover"\n            />\n            <div class="modal-book-descr">\n              <h2 class="modal-book-title">${o}</h2>\n              <h3 class="modal-book-author">${s}</h3>\n\n          <p class="modal-book-review">${r||"Description will be added soon .."}</p>\n        <ul class="modal-book-list list">\n          <li class="modal-book-el">\n            <a\n              href="${l[0].url}"\n              class="modal-book-link"\n              target="_blank"\n              rel="noopener no-referrer"\n              >\n              <img\n              src="${t(a)}"\n              alt="Buy on Amazon"\n              width="62"\n              height="19"\n              class="modal-book-seller amazon"\n            /></a>\n          </li>\n          <li class="modal-book-el">\n            <a\n              href="${l[1].url}"\n              class="modal-book-link"\n              target="_blank"\n              rel="noopener no-referrer"\n              ><img\n              src="${t(c)}"\n              alt="Buy on Apple"\n              width="33"\n              height="32"\n              class="modal-book-seller"\n            /></a>\n          </li>\n          <li class="modal-book-el">\n            <a\n              href="${l[4].url}"\n              class="modal-book-link"\n              target="_blank"\n              rel="noopener no-referrer"\n            >\n              <img\n\n              src="${t(i)}"\n              alt="Book shop"\n              width="38"\n              height="36"\n              class="modal-book-seller"\n            /></a>\n          </li>\n        </ul>\n      </div>`}(n);p.innerHTML=s,d.classList.remove("is-hidden"),u.classList.remove("is-hidden"),d.classList.remove("is-hidden"),document.body.style.overflow="hidden",document.querySelector(".modal-btn-add").textContent="ADD TO SHOPPING LIST",l.addEventListener("click",k),u.addEventListener("click",k),document.addEventListener("keydown",y);const g=document.querySelector(".modal-btn-add");g.addEventListener("click",b);const h=document.querySelector(".modal-note");o?(g.textContent="REMOVE FROM THE SHOPPING LIST",h.textContent="Congratulations! You have added the book to the shopping list. To delete, press the button “Remove from the shopping list”."):(g.textContent="ADD TO SHOPPING LIST",h.textContent="")}catch(t){m={}}}(o)})),d.addEventListener("click",(t=>{t.stopPropagation()}));let g=[];function h(){document.body.style.overflow="visible"}function b(){if(m){const t=m,e=JSON.parse(localStorage.getItem("shopping-list"))||[];if(e.some((e=>e._id===t._id))){const n=e.filter((e=>e._id!==t._id));localStorage.setItem("shopping-list",JSON.stringify(n)),document.querySelector(".modal-btn-add").textContent="ADD TO SHOPPING LIST";document.querySelector(".modal-note").textContent=""}else{e.push(t),localStorage.setItem("shopping-list",JSON.stringify(e)),document.querySelector(".modal-btn-add").textContent="REMOVE FROM THE SHOPPING LIST";document.querySelector(".modal-note").textContent="Congratulations! You have added the book to the shopping list. To delete, press the button “Remove from the shopping list”."}}else{document.querySelector(".error-message").textContent="Помилка: дані про книгу відсутні."}}!function(){const t=localStorage.getItem("shopping-list");t&&(g=JSON.parse(t))}();function f(t){t.target===u&&t.target!==d&&k()}function y(t){"Escape"===t.key&&k()}function k(){d.classList.add("is-hidden"),u.classList.add("is-hidden"),h(),document.removeEventListener("keydown",y),u.removeEventListener("click",f)}l.addEventListener("click",(function(){k(),h()})),u.addEventListener("click",f),document.addEventListener("keydown",y),s("74Aiq");r=s("d1cSn"),r=s("d1cSn");const S=document.querySelector(".books-container"),L=document.querySelector(".best-sellers > h2");async function v(){try{const t=await(0,r.fetchCategoryList)();L.innerHTML='Best Sellers <span class="title-accent">Books</span>',S.innerHTML="";const e=document.createElement("ul");e.classList.add("categories-list"),e.classList.add("list"),t.forEach((t=>{!async function(t,e){const n=document.createElement("li");n.classList.add("category"),n.classList.add("show-top"),function(t,e){const n=document.createElement("h3");n.textContent=t,n.classList.add("category-title"),e.appendChild(n)}(t,n);try{const e=await(0,r.fetchParticularCategory)(t);if(!(e.length>0))throw new Error;{const t=document.createElement("ul");t.classList.add("card-set"),t.classList.add("list");if(e.slice(0,5).forEach((e=>{w(e,t)})),n.appendChild(t),e.length>5){const o=function(t){const e=document.createElement("button");return e.classList.add("btn"),e.classList.add("see-more-button"),e.textContent="See More",t.appendChild(e),e}(n),s=e.slice(5);o.addEventListener("click",E.bind(null,s,t))}}}catch(t){!function(t){const e=document.createElement("p");e.classList.add("error-notification"),e.textContent="No books found",t.appendChild(e)}(n)}e.appendChild(n)}(t.list_name,e)})),S.append(e)}catch(t){alert("Something went wrong! Try reload the page!")}}function E(t,e,n){n.target.closest(".category").classList.remove("show-top"),t.forEach((t=>{w(t,e)})),n.currentTarget.remove()}function w({book_image:t,title:e,author:n,_id:o},s){const a=`\n  <li class="card-set-item" data-id="${o}">\n\t  <button class="card-set-btn" type="button">\n      <div class="wrapper-img">\n        <img class="card-set-img" src="${t}" alt="">\n      </div>\n      <h4 class="card-set-book-title ellipsis">${e}</h4>\n      <p class="card-set-author ellipsis">${n}</p>\n    </button>\n  </li>`;s.insertAdjacentHTML("beforeend",a)}v();const _=document.querySelector(".side-bar-list"),C=document.querySelector(".books-container"),T=document.querySelector(".best-sellers > h2");let x="All categories";!async function(){try{const t=await(0,r.fetchCategoryList)(),e='<li><button class="side-bar-btn current-category" type="button" data-all_categories>All categories</button></li>';_.insertAdjacentHTML("afterbegin",e),function(t){const e=t.map((({list_name:t})=>`<li><button type="button" class="side-bar-btn">${t}</button></li>`)).join("");_.insertAdjacentHTML("beforeend",e)}(t)}catch(t){alert("Something went wrong! Try reload the page!")}}(),_.addEventListener("click",(function(t){if(t.currentTarget===t.target)return;if(t.target.textContent===x)return;x=t.target.textContent;const e=document.querySelector(".current-category");e&&e.classList.remove("current-category");if(t.target.classList.add("current-category"),""===t.target.dataset.all_categories)return void v();const n=document.querySelector(".card-set-title"),o=document.createElement("ul");o.classList.add("card-set"),o.classList.add("list"),x=t.target.textContent,T.innerHTML="",C.innerHTML="";const s=function(t){const e=t.split(" "),n=e.length-1;return`${e.slice(0,n).join(" ")} <span class="title-accent">${e[n]}</span>`}(x);n.innerHTML=s,async function(t,e){try{const n=(await(0,r.fetchParticularCategory)(t)).map((({book_image:t,title:e,author:n,_id:o})=>`<li class="card-set-item" data-id="${o}">\n\t <button class="card-set-btn" type="button"><div class="wrapper-img"><img class="card-set-img" src="${t}" alt=""></div>\n\t  <h4 class="card-set-book-title ellipsis">${e}</h4>\n\t  <p class="card-set-author ellipsis">${n}</p></button></li>`)).join("");e.innerHTML=n}catch(t){!function(t){const e=document.createElement("p");e.classList.add("error-notification"),e.textContent="No books found",t.appendChild(e)}(e)}}(x,o),C.append(o)})),s("dTazW"),s("8FnLx"),s("d1cSn");(0,s("l4fgP").setActivePage)("home");
//# sourceMappingURL=index.328a4bb3.js.map
