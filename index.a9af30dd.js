!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},o={},r=t.parcelRequired7c6;null==r&&((r=function(e){if(e in n)return n[e].exports;if(e in o){var t=o[e];delete o[e];var r={id:e,exports:{}};return n[e]=r,t.call(r.exports,r,r.exports),r.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){o[e]=t},t.parcelRequired7c6=r),r("iE7OH").register(JSON.parse('{"9p9yL":"index.a9af30dd.js","aogqn":"pop-up-shop-1.06fa7713.png","4I5XU":"pop-up-shop-2.57ecc8dc.png","243JW":"pop-up-shop-3.e5effbae.png","8HuFU":"index.b0f20763.js"}')),r("i8Q71");var a,c=r("bpxeT"),s=r("2TvXO"),i=r("jos2x");a=r("aNJCr").getBundleURL("9p9yL")+r("iE7OH").resolve("aogqn");var l;l=r("aNJCr").getBundleURL("9p9yL")+r("iE7OH").resolve("4I5XU");var d;d=r("aNJCr").getBundleURL("9p9yL")+r("iE7OH").resolve("243JW");var u,p=document.querySelector(".modal-close-btn"),m=document.querySelector(".modal-window"),f=document.querySelector(".backdrop"),h=document.querySelector(".modal-content");document.querySelector(".books-container").addEventListener("click",(function(e){var t=e.target.closest(".card-set-item");if(!t)return;var n=t.getAttribute("data-id");n&&function(e){v.apply(this,arguments)}(n)})),m.addEventListener("click",(function(e){e.stopPropagation()}));var g;function b(){document.body.style.overflow="visible"}function v(){return(v=e(c)(e(s).mark((function t(n){var o,r,a,c,l,d;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,i.fetchBookById)(n);case 3:o=e.sent,u=o,r=JSON.parse(localStorage.getItem("shopping-list"))||[],a=r.some((function(e){return e._id===o._id})),c=E(o),h.innerHTML=c,m.classList.remove("is-hidden"),k(),p.addEventListener("click",x),f.addEventListener("click",x),document.addEventListener("keydown",S),(l=document.querySelector(".modal-btn-add")).addEventListener("click",y),d=document.querySelector(".modal-note"),a?(l.textContent="REMOVE FROM THE SHOPPING LIST",d.textContent="Congratulations! You have added the book to the shopping list. To delete, press the button “Remove from the shopping list”."):(l.textContent="ADD TO SHOPPING LIST",d.textContent=""),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),u={};case 23:case"end":return e.stop()}}),t,null,[[0,20]])})))).apply(this,arguments)}function y(){if(u){var e=u,t=JSON.parse(localStorage.getItem("shopping-list"))||[];if(t.some((function(t){return t._id===e._id}))){var n=t.filter((function(t){return t._id!==e._id}));localStorage.setItem("shopping-list",JSON.stringify(n)),document.querySelector(".modal-btn-add").textContent="ADD TO SHOPPING LIST",document.querySelector(".modal-note").textContent=""}else{t.push(e),localStorage.setItem("shopping-list",JSON.stringify(t)),document.querySelector(".modal-btn-add").textContent="REMOVE FROM THE SHOPPING LIST",document.querySelector(".modal-note").textContent="Congratulations! You have added the book to the shopping list. To delete, press the button “Remove from the shopping list”."}}else{document.querySelector(".error-message").textContent="Помилка: дані про книгу відсутні."}}(g=localStorage.getItem("shopping-list"))&&JSON.parse(g);function k(){f.classList.remove("is-hidden"),m.classList.remove("is-hidden"),document.body.style.overflow="hidden",document.querySelector(".modal-btn-add").textContent="ADD TO SHOPPING LIST"}function L(e){e.target===f&&e.target!==m&&x()}function S(e){"Escape"===e.key&&x()}function x(){m.classList.add("is-hidden"),f.classList.add("is-hidden"),b(),document.removeEventListener("keydown",S),f.removeEventListener("click",L)}function E(t){var n=t.book_image,o=t.list_name,r=t.author,c=t.description,s=t.buy_links,i=c||"Description will be added soon ..";return'<div class="modal-content">\n      <img class="modal-book-img"\n              src="'.concat(n,'"\n              alt="Book cover"\n            />\n            <div class="modal-book-descr">\n              <h2 class="modal-book-title">').concat(o,'</h2>\n              <h3 class="modal-book-author">').concat(r,'</h3>\n\n          <p class="modal-book-review">').concat(i,'</p>\n        <ul class="modal-book-list list">\n          <li class="modal-book-el">\n            <a\n              href="').concat(s[0].url,'"\n              class="modal-book-link"\n              target="_blank"\n              rel="noopener no-referrer"\n              >\n              <img\n              src="').concat(e(a),'"\n              alt="Buy on Amazon"\n              width="62"\n              height="19"\n              class="modal-book-seller amazon"\n            /></a>\n          </li>\n          <li class="modal-book-el">\n            <a\n              href="').concat(s[1].url,'"\n              class="modal-book-link"\n              target="_blank"\n              rel="noopener no-referrer"\n              ><img\n              src="').concat(e(l),'"\n              alt="Buy on Apple"\n              width="33"\n              height="32"\n              class="modal-book-seller"\n            /></a>\n          </li>\n          <li class="modal-book-el">\n            <a\n              href="').concat(s[4].url,'"\n              class="modal-book-link"\n              target="_blank"\n              rel="noopener no-referrer"\n            >\n              <img\n\n              src="').concat(e(d),'"\n              alt="Book shop"\n              width="38"\n              height="36"\n              class="modal-book-seller"\n            /></a>\n          </li>\n        </ul>\n      </div>')}p.addEventListener("click",(function(){x(),b()})),f.addEventListener("click",L),document.addEventListener("keydown",S),r("23Ajj");c=r("bpxeT"),s=r("2TvXO"),i=r("jos2x"),c=r("bpxeT"),s=r("2TvXO"),i=r("jos2x");var w=document.querySelector(".books-container"),T=document.querySelector(".best-sellers > h2");function _(){return C.apply(this,arguments)}function C(){return(C=e(c)(e(s).mark((function t(){var n,o;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,i.fetchCategoryList)();case 3:n=e.sent,T.innerHTML='Best Sellers <span class="title-accent">Books</span>',w.innerHTML="",(o=document.createElement("ul")).classList.add("categories-list"),o.classList.add("list"),n.forEach((function(e){H(e.list_name,o)})),w.append(o),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),alert("Something went wrong! Try reload the page!");case 16:case"end":return e.stop()}}),t,null,[[0,13]])})))).apply(this,arguments)}function H(e,t){return O.apply(this,arguments)}function O(){return(O=e(c)(e(s).mark((function t(n,o){var r,a,c,l,d;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=document.createElement("li")).classList.add("category"),r.classList.add("show-top"),I(n,r),e.prev=4,e.next=7,(0,i.fetchParticularCategory)(n);case 7:if(!((a=e.sent).length>0)){e.next=12;break}(c=document.createElement("ul")).classList.add("card-set"),c.classList.add("list"),a.slice(0,5).forEach((function(e){N(e,c)})),r.appendChild(c),a.length>5&&(l=A(r),d=a.slice(5),l.addEventListener("click",q.bind(null,d,c))),e.next=13;break;case 12:throw new Error;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),M(r);case 18:o.appendChild(r);case 19:case"end":return e.stop()}}),t,null,[[4,15]])})))).apply(this,arguments)}function q(e,t,n){n.target.closest(".category").classList.remove("show-top"),e.forEach((function(e){N(e,t)})),n.currentTarget.remove()}function A(e){var t=document.createElement("button");return t.classList.add("btn"),t.classList.add("see-more-button"),t.textContent="See More",e.appendChild(t),t}function I(e,t){var n=document.createElement("h3");n.textContent=e,n.classList.add("category-title"),t.appendChild(n)}function N(e,t){var n=e.book_image,o=e.title,r=e.author,a=e._id,c='\n  <li class="card-set-item" data-id="'.concat(a,'">\n\t  <button class="card-set-btn" type="button">\n      <div class="wrapper-img">\n        <img class="card-set-img" src="').concat(n,'" alt="">\n      </div>\n      <h4 class="card-set-book-title ellipsis">').concat(o,'</h4>\n      <p class="card-set-author ellipsis">').concat(r,"</p>\n    </button>\n  </li>");t.insertAdjacentHTML("beforeend",c)}function M(e){var t=document.createElement("p");t.classList.add("error-notification"),t.textContent="No books found",e.appendChild(t)}_();var R=document.querySelector(".side-bar-list"),j=document.querySelector(".books-container"),P=document.querySelector(".best-sellers > h2"),B="All categories";function J(){return J=e(c)(e(s).mark((function t(){var n;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,i.fetchCategoryList)();case 3:n=e.sent,'<li><button class="side-bar-btn current-category" type="button" data-all_categories>All categories</button></li>',R.insertAdjacentHTML("afterbegin",'<li><button class="side-bar-btn current-category" type="button" data-all_categories>All categories</button></li>'),F(n),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),alert("Something went wrong! Try reload the page!");case 12:case"end":return e.stop()}}),t,null,[[0,9]])}))),J.apply(this,arguments)}function F(e){var t=e.map((function(e){var t=e.list_name;return'<li><button type="button" class="side-bar-btn">'.concat(t,"</button></li>")})).join("");return R.insertAdjacentHTML("beforeend",t)}function D(){return D=e(c)(e(s).mark((function t(n,o){var r,a;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,i.fetchParticularCategory)(n);case 3:r=e.sent,a=r.map((function(e){var t=e.book_image,n=e.title,o=e.author,r=e._id;return'<li class="card-set-item" data-id="'.concat(r,'">\n\t <button class="card-set-btn" type="button"><div class="wrapper-img"><img class="card-set-img" src="').concat(t,'" alt=""></div>\n\t  <h4 class="card-set-book-title ellipsis">').concat(n,'</h4>\n\t  <p class="card-set-author ellipsis">').concat(o,"</p></button></li>")})).join(""),o.innerHTML=a,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),U(o);case 11:case"end":return e.stop()}}),t,null,[[0,8]])}))),D.apply(this,arguments)}function U(e){var t=document.createElement("p");t.classList.add("error-notification"),t.textContent="No books found",e.appendChild(t)}!function(){J.apply(this,arguments)}(),R.addEventListener("click",(function(e){if(e.currentTarget===e.target)return;if(e.target.textContent===B)return;B=e.target.textContent;var t=document.querySelector(".current-category");t&&t.classList.remove("current-category");if(e.target.classList.add("current-category"),""===e.target.dataset.all_categories)return void _();var n=document.querySelector(".card-set-title"),o=document.createElement("ul");o.classList.add("card-set"),o.classList.add("list"),B=e.target.textContent,P.innerHTML="",j.innerHTML="";var r=(a=B,c=a.split(" "),s=c.length-1,i=c.slice(0,s).join(" "),"".concat(i,' <span class="title-accent">').concat(c[s],"</span>"));var a,c,s,i;n.innerHTML=r,function(e,t){D.apply(this,arguments)}(B,o),j.append(o)})),r("xpKCW"),r("cs7FV"),r("jos2x");(0,r("cmach").setActivePage)("home")}();
//# sourceMappingURL=index.a9af30dd.js.map
