function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},n={},l=t.parcelRequired7c6;null==l&&((l=function(e){if(e in o)return o[e].exports;if(e in n){var t=n[e];delete n[e];var l={id:e,exports:{}};return o[e]=l,t.call(l.exports,l,l.exports),l.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){n[e]=t},t.parcelRequired7c6=l),l("kyEFX").register(JSON.parse('{"7bk21":"index.c84c1ba5.js","gIJxI":"pop-up-shop-1.06fa7713.png","hZaf5":"pop-up-shop-2.57ecc8dc.png","3u4at":"pop-up-shop-3.e5effbae.png","W511b":"index.e0f49445.js"}')),l("bUb57");var s,a=l("d1cSn");s=new URL(l("kyEFX").resolve("gIJxI"),import.meta.url).toString();var d;d=new URL(l("kyEFX").resolve("hZaf5"),import.meta.url).toString();var c;c=new URL(l("kyEFX").resolve("3u4at"),import.meta.url).toString();const i=document.querySelector(".modal-close-btn"),r=document.querySelector(".modal-window"),m=document.querySelector(".backdrop");let u,p=document.querySelector(".modal-content");document.querySelector(".books-container").addEventListener("click",(function(t){const o=t.target.closest(".book-item");if(!o)return;const n=o.getAttribute("data-id");n&&(console.log("Клік на книзі з ID:",n),async function(t){try{const o=await(0,a.fetchBookById)(t);u=o;const n=(JSON.parse(localStorage.getItem("shopping-list"))||[]).some((e=>e._id===o._id)),l=function(t){const{book_image:o,list_name:n,author:l,description:a,buy_links:i}=t;return`<div class="modal-content">\n      <img class="modal-book-img"\n              src="${o}"\n              alt="Book cover"\n            />\n            <div class="modal-book-descr">\n              <h2 class="modal-book-title">${n}</h2>\n              <h3 class="modal-book-author">${l}</h3>\n\n          <p class="modal-book-review">${a}</p>\n        <ul class="modal-book-list list">\n          <li class="modal-book-el">\n            <a\n              href="${i[0].url}"\n              class="modal-book-link"\n              target="_blank"\n              rel="noopener no-referrer"\n              >\n              <img\n              src="${e(s)}"\n              alt="Buy on Amazon"\n              width="62"\n              height="19"\n              class="modal-book-seller"\n            /></a>\n          </li>\n          <li class="modal-book-el">\n            <a\n              href="${i[1].url}"\n              class="modal-book-link"\n              target="_blank"\n              rel="noopener no-referrer"\n              ><img\n              src="${e(d)}"\n              alt="Buy on Apple"\n              width="33"\n              height="32"\n              class="modal-book-seller"\n            /></a>\n          </li>\n          <li class="modal-book-el">\n            <a\n              href="${i[4].url}"\n              class="modal-book-link"\n              target="_blank"\n              rel="noopener no-referrer"\n            >\n              <img\n\n              src="${e(c)}"\n              alt="Book shop"\n              width="38"\n              height="36"\n              class="modal-book-seller"\n            /></a>\n          </li>\n        </ul>\n      </div>`}(o);p.innerHTML=l,r.classList.remove("is-hidden"),console.log("Модальне вікно відкрито"),m.classList.remove("is-hidden"),r.classList.remove("is-hidden"),document.body.style.overflow="hidden",document.querySelector(".modal-btn-add").textContent="ADD TO SHOPPING LIST",i.addEventListener("click",S),m.addEventListener("click",S),document.addEventListener("keydown",f);const h=document.querySelector(".modal-btn-add");h.addEventListener("click",k);const g=document.querySelector(".modal-note");n?(h.textContent="REMOVE FROM THE SHOPPING LIST",g.textContent="Congratulations! You have added the book to the shopping list. To delete, press the button “Remove from the shopping list”."):(h.textContent="ADD TO SHOPPING LIST",g.textContent="")}catch(e){console.error("Помилка завантаження даних книги:",e),u={}}}(n))})),r.addEventListener("click",(e=>{e.stopPropagation()}));let h=[];function g(){document.body.style.overflow="visible"}function k(){if(u){const e=u,t=JSON.parse(localStorage.getItem("shopping-list"))||[];if(t.some((t=>t._id===e._id))){const o=t.filter((t=>t._id!==e._id));localStorage.setItem("shopping-list",JSON.stringify(o)),document.querySelector(".modal-btn-add").textContent="ADD TO SHOPPING LIST";document.querySelector(".modal-note").textContent=""}else{t.push(e),localStorage.setItem("shopping-list",JSON.stringify(t)),document.querySelector(".modal-btn-add").textContent="REMOVE FROM THE SHOPPING LIST";document.querySelector(".modal-note").textContent="Congratulations! You have added the book to the shopping list. To delete, press the button “Remove from the shopping list”."}}else console.error("Дані про книгу відсутні.")}!function(){const e=localStorage.getItem("shopping-list");e&&(h=JSON.parse(e))}();function b(e){e.target===m&&e.target!==r&&S()}function f(e){"Escape"===e.key&&S()}function S(){r.classList.add("is-hidden"),m.classList.add("is-hidden"),g(),document.removeEventListener("keydown",f),m.removeEventListener("click",b)}function E(e){const t=document.createElement("li");t.classList.add("book-item"),t.classList.add("link"),t.dataset.id=`${e._id}`;const o=document.createElement("img");o.src=e.book_image,o.alt=e.title,o.classList.add("book-image"),t.appendChild(o);const n=document.createElement("h4");n.textContent=e.title,n.classList.add("book-title"),n.classList.add("ellipsis"),t.appendChild(n);const l=document.createElement("p");return l.textContent=e.author,l.classList.add("book-author"),l.classList.add("ellipsis"),t.appendChild(l),t}i.addEventListener("click",(function(){S(),g()})),m.addEventListener("click",b),document.addEventListener("keydown",f),l("74Aiq"),l("dTazW"),document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector(".books-container");fetch("https://books-backend.p.goit.global/books/category-list").then((e=>e.json())).then((t=>{const o=document.createElement("ul");o.classList.add("list"),o.classList.add("categories-list"),t.forEach((e=>{const t=document.createElement("li");t.classList.add("category");const n=document.createElement("h3");n.textContent=e.list_name,n.classList.add("category-item"),t.appendChild(n),fetch(`https://books-backend.p.goit.global/books/category?category=${e.list_name}`).then((e=>e.json())).then((e=>{const o=e;if(o.length>0){const e=document.createElement("ul");e.classList.add("book-list"),o.slice(0,5).forEach((t=>{const o=E(t);e.appendChild(o)})),t.appendChild(e);if(document.querySelectorAll(".book-item").forEach((e=>{e.addEventListener("click",(()=>{}))})),o.length>5){const e=document.createElement("button");e.textContent="See More",e.classList.add("see-more-button"),t.appendChild(e),e.addEventListener("click",(()=>{const n=t.querySelector(".book-list");o.slice(5).forEach((e=>{const t=E(e);n.appendChild(t)})),e.remove()}))}}else{const e=document.createElement("p");e.textContent="Немає популярних книг для цієї категорії",t.appendChild(e)}})).catch((t=>{console.log(`Сталася помилка при отриманні даних для категорії "${e.list_name}" з API:`,t)})),o.appendChild(t)})),e.appendChild(o)})).catch((e=>{console.log("Сталася помилка при отриманні даних з API:",e)}))})),l("8FnLx"),l("d1cSn");(0,l("l4fgP").setActivePage)("home");
//# sourceMappingURL=index.c84c1ba5.js.map
