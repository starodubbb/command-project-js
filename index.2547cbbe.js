!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},o={},r=t.parcelRequired7c6;null==r&&((r=function(e){if(e in n)return n[e].exports;if(e in o){var t=o[e];delete o[e];var r={id:e,exports:{}};return n[e]=r,t.call(r.exports,r,r.exports),r.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){o[e]=t},t.parcelRequired7c6=r),r("iE7OH").register(JSON.parse('{"9p9yL":"index.2547cbbe.js","aogqn":"pop-up-shop-1.06fa7713.png","4I5XU":"pop-up-shop-2.57ecc8dc.png","243JW":"pop-up-shop-3.e5effbae.png","8HuFU":"index.b0f20763.js"}')),r("i8Q71");var a,c=r("bpxeT"),s=r("2TvXO"),i=r("jos2x");a=r("aNJCr").getBundleURL("9p9yL")+r("iE7OH").resolve("aogqn");var l;l=r("aNJCr").getBundleURL("9p9yL")+r("iE7OH").resolve("4I5XU");var d;d=r("aNJCr").getBundleURL("9p9yL")+r("iE7OH").resolve("243JW");var u,p=document.querySelector(".modal-close-btn"),m=document.querySelector(".modal-window"),f=document.querySelector(".backdrop"),h=document.querySelector(".modal-content");document.querySelector(".books-container").addEventListener("click",(function(e){var t=e.target.closest(".card-set-item");if(!t)return;var n=t.getAttribute("data-id");n&&function(e){v.apply(this,arguments)}(n)})),m.addEventListener("click",(function(e){e.stopPropagation()}));var g;function b(){document.body.style.overflow="visible"}function v(){return(v=e(c)(e(s).mark((function t(n){var o,r,a,c,l,d;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,i.fetchBookById)(n);case 3:o=e.sent,u=o,r=JSON.parse(localStorage.getItem("shopping-list"))||[],a=r.some((function(e){return e._id===o._id})),c=x(o),h.innerHTML=c,m.classList.remove("is-hidden"),k(),p.addEventListener("click",E),f.addEventListener("click",E),document.addEventListener("keydown",S),(l=document.querySelector(".modal-btn-add")).addEventListener("click",y),d=document.querySelector(".modal-note"),a?(l.textContent="REMOVE FROM THE SHOPPING LIST",d.textContent="Congratulations! You have added the book to the shopping list. To delete, press the button “Remove from the shopping list”."):(l.textContent="ADD TO SHOPPING LIST",d.textContent=""),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),u={};case 23:case"end":return e.stop()}}),t,null,[[0,20]])})))).apply(this,arguments)}function y(){if(u){var e=u,t=JSON.parse(localStorage.getItem("shopping-list"))||[];if(t.some((function(t){return t._id===e._id}))){var n=t.filter((function(t){return t._id!==e._id}));localStorage.setItem("shopping-list",JSON.stringify(n)),document.querySelector(".modal-btn-add").textContent="ADD TO SHOPPING LIST",document.querySelector(".modal-note").textContent=""}else{t.push(e),localStorage.setItem("shopping-list",JSON.stringify(t)),document.querySelector(".modal-btn-add").textContent="REMOVE FROM THE SHOPPING LIST",document.querySelector(".modal-note").textContent="Congratulations! You have added the book to the shopping list. To delete, press the button “Remove from the shopping list”."}}else{document.querySelector(".error-message").textContent="Помилка: дані про книгу відсутні."}}(g=localStorage.getItem("shopping-list"))&&JSON.parse(g);function k(){f.classList.remove("is-hidden"),m.classList.remove("is-hidden"),document.body.style.overflow="hidden",document.querySelector(".modal-btn-add").textContent="ADD TO SHOPPING LIST"}function L(e){e.target===f&&e.target!==m&&E()}function S(e){"Escape"===e.key&&E()}function E(){m.classList.add("is-hidden"),f.classList.add("is-hidden"),b(),document.removeEventListener("keydown",S),f.removeEventListener("click",L)}function x(t){var n=t.book_image,o=t.list_name,r=t.author,c=t.description,s=t.buy_links;return'<div class="modal-content">\n      <img class="modal-book-img"\n              src="'.concat(n,'"\n              alt="Book cover"\n            />\n            <div class="modal-book-descr">\n              <h2 class="modal-book-title">').concat(o,'</h2>\n              <h3 class="modal-book-author">').concat(r,'</h3>\n\n          <p class="modal-book-review">').concat(c,'</p>\n        <ul class="modal-book-list list">\n          <li class="modal-book-el">\n            <a\n              href="').concat(s[0].url,'"\n              class="modal-book-link"\n              target="_blank"\n              rel="noopener no-referrer"\n              >\n              <img\n              src="').concat(e(a),'"\n              alt="Buy on Amazon"\n              width="62"\n              height="19"\n              class="modal-book-seller amazon"\n            /></a>\n          </li>\n          <li class="modal-book-el">\n            <a\n              href="').concat(s[1].url,'"\n              class="modal-book-link"\n              target="_blank"\n              rel="noopener no-referrer"\n              ><img\n              src="').concat(e(l),'"\n              alt="Buy on Apple"\n              width="33"\n              height="32"\n              class="modal-book-seller"\n            /></a>\n          </li>\n          <li class="modal-book-el">\n            <a\n              href="').concat(s[4].url,'"\n              class="modal-book-link"\n              target="_blank"\n              rel="noopener no-referrer"\n            >\n              <img\n\n              src="').concat(e(d),'"\n              alt="Book shop"\n              width="38"\n              height="36"\n              class="modal-book-seller"\n            /></a>\n          </li>\n        </ul>\n      </div>')}p.addEventListener("click",(function(){E(),b()})),f.addEventListener("click",L),document.addEventListener("keydown",S),r("23Ajj");c=r("bpxeT"),s=r("2TvXO"),i=r("jos2x"),c=r("bpxeT"),s=r("2TvXO"),i=r("jos2x");function C(){return _.apply(this,arguments)}function _(){return _=e(c)(e(s).mark((function t(){var n,o,r;return e(s).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=document.querySelector(".books-container"),t.next=3,(0,i.fetchCategoryList)();case 3:o=t.sent,console.log(o),(r=document.createElement("ul")).classList.add("list"),r.classList.add("categories-list"),o.forEach(function(){var t=e(c)(e(s).mark((function t(n){var o,a,c,l,d,u;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(o=document.createElement("li")).classList.add("category"),(a=document.createElement("h3")).textContent=n.list_name,a.classList.add("category-item"),o.appendChild(a),e.next=8,(0,i.fetchParticularCategory)(n.list_name);case 8:(c=e.sent).length>0?((l=document.createElement("ul")).classList.add("card-set"),l.classList.add("book-list"),c.slice(0,5).forEach((function(e){var t=q(e);l.appendChild(t)})),o.appendChild(l),document.querySelectorAll(".card-set-item").forEach((function(e){e.addEventListener("click",(function(){}))})),c.length>5&&((d=document.createElement("button")).classList.add("btn"),d.textContent="See More",d.classList.add("see-more-button"),o.appendChild(d),d.addEventListener("click",(function(){var e=o.querySelector(".card-set");c.slice(5).forEach((function(t){var n=q(t);e.appendChild(n)})),d.remove()})))):((u=document.createElement("p")).textContent="Немає популярних книг для цієї категорії",o.appendChild(u)),r.appendChild(o);case 11:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),n.appendChild(r);case 10:case"end":return t.stop()}}),t)}))),_.apply(this,arguments)}function q(e){var t=document.createElement("li");t.classList.add("card-set-item"),t.classList.add("book-item"),t.classList.add("link"),t.dataset.id="".concat(e._id);var n=document.createElement("img");n.src=e.book_image,n.alt=e.title,n.classList.add("book-image"),t.appendChild(n);var o=document.createElement("h4");o.textContent=e.title,o.classList.add("book-title"),o.classList.add("ellipsis"),t.appendChild(o);var r=document.createElement("p");return r.textContent=e.author,r.classList.add("book-author"),r.classList.add("ellipsis"),t.appendChild(r),t}C();document.querySelector(".side-bar");var H=document.querySelector(".side-bar-list"),T=(document.querySelector(".books-container"),document.querySelector(".card-set")),w=document.querySelector(".best-sellers > h2");function O(){return O=e(c)(e(s).mark((function t(){var n;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.fetchCategoryList)();case 2:n=e.sent,'<li><button class="side-bar-btn current-category" type="button" data-all-categories>All categories</button></li>',H.insertAdjacentHTML("afterbegin",'<li><button class="side-bar-btn current-category" type="button" data-all-categories>All categories</button></li>'),document.querySelector("[data-all-categories]").addEventListener("click",C),A(n);case 8:case"end":return e.stop()}}),t)}))),O.apply(this,arguments)}function A(e){var t=e.map((function(e){var t=e.list_name;return'<li><button type="button" class="side-bar-btn">'.concat(t,"</button></li>")})).join("");return H.insertAdjacentHTML("beforeend",t)}function I(){return I=e(c)(e(s).mark((function t(n){var o,r;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.fetchParticularCategory)(n);case 2:return o=e.sent,r=o.map((function(e){var t=e.book_image,n=e.title,o=e.author,r=e._id;return'<li class="card-set-item" data-id="'.concat(r,'">\n\t <button class="card-set-btn" type="button"><div class="wrapper-img"><img class="card-set-img" src="').concat(t,'" alt=""></div>\n\t  <h4 class="card-set-book-title ellipsis">').concat(n,'</h4>\n\t  <p class="card-set-author ellipsis">').concat(o,"</p></li></button>")})).join(""),e.abrupt("return",T.innerHTML=r);case 5:case"end":return e.stop()}}),t)}))),I.apply(this,arguments)}!function(){O.apply(this,arguments)}(),H.addEventListener("click",(function(e){var t=e.target.textContent,n=document.querySelector(".categories-list"),o=document.querySelector(".current-category"),r=document.querySelector(".card-set-title");if(e.currentTarget===e.target)return;w.innerHTML="",n.innerHTML="";var a=t;r.innerHTML=a,function(e){I.apply(this,arguments)}(t),o&&o.classList.remove("current-category");e.target.classList.add("current-category")})),r("xpKCW"),r("cs7FV"),r("jos2x");(0,r("cmach").setActivePage)("home")}();
//# sourceMappingURL=index.2547cbbe.js.map
