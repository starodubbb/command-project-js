{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/runtime-e78dd51f11fc0e7b.js","src/js/index.js","src/js/pop-up.js","node_modules/@parcel/runtime-js/lib/runtime-cd461fe48172ca2b.js","node_modules/@parcel/runtime-js/lib/runtime-761f4efb899443c3.js","node_modules/@parcel/runtime-js/lib/runtime-af97b9594be9dd14.js","src/js/sidebar.js","src/js/best-sellers.js"],"sourcesContent":["require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"9p9yL\\\":\\\"index.a9af30dd.js\\\",\\\"aogqn\\\":\\\"pop-up-shop-1.06fa7713.png\\\",\\\"4I5XU\\\":\\\"pop-up-shop-2.57ecc8dc.png\\\",\\\"243JW\\\":\\\"pop-up-shop-3.e5effbae.png\\\",\\\"8HuFU\\\":\\\"index.b0f20763.js\\\"}\"));","import './header.js';\nimport './pop-up.js';\nimport './scroll-up.js';\nimport './sidebar.js';\nimport './support.js';\nimport './best-sellers.js';\nimport './mobile-menu.js';\nimport './service-api.js';\nimport { setActivePage } from './various-functions.js';\n\nconst PAGE = 'home';\n\nsetActivePage(PAGE);\n","import { fetchBookById } from './service-api';\n\nimport shop1 from '../img/pop-up/pop-up-shop-1.png';\nimport shop2 from '../img/pop-up/pop-up-shop-2.png';\nimport shop3 from '../img/pop-up/pop-up-shop-3.png';\n\nconst closeBtn = document.querySelector('.modal-close-btn');\nconst modal = document.querySelector('.modal-window');\nconst backdrop = document.querySelector('.backdrop');\nlet modalContent = document.querySelector('.modal-content');\nlet currentBookData;\n\nconst bestSellerBooks = document.querySelector('.books-container');\n\nbestSellerBooks.addEventListener('click', onBookClick);\n\nmodal.addEventListener('click', evt => {\n  evt.stopPropagation();\n});\n\nlet shoppingListData = [];\nloadData();\n\nfunction disableBodyScroll() {\n  document.body.style.overflow = 'hidden';\n}\n\nfunction enableBodyScroll() {\n  document.body.style.overflow = 'visible';\n}\n\nfunction onBookClick(event) {\n  const bookElement = event.target.closest('.card-set-item');\n  if (!bookElement) return;\n\n  const bookId = bookElement.getAttribute('data-id');\n  if (bookId) {\n    loadBookDetails(bookId);\n  }\n}\n\nasync function loadBookDetails(bookId) {\n  try {\n    const bookData = await fetchBookById(bookId);\n    currentBookData = bookData;\n\n    const shoppingList =\n      JSON.parse(localStorage.getItem('shopping-list')) || [];\n\n    const isBookInShoppingList = shoppingList.some(\n      item => item._id === bookData._id\n    );\n\n    const modalHTML = markupModal(bookData);\n\n    modalContent.innerHTML = modalHTML;\n    modal.classList.remove('is-hidden');\n    openModal();\n\n    closeBtn.addEventListener('click', closeModal);\n    backdrop.addEventListener('click', closeModal);\n    document.addEventListener('keydown', onEscapeKey);\n\n    const btnAddEl = document.querySelector('.modal-btn-add');\n    btnAddEl.addEventListener('click', onClickBtnAdd);\n\n    const modalNote = document.querySelector('.modal-note');\n\n    if (isBookInShoppingList) {\n      btnAddEl.textContent = 'REMOVE FROM THE SHOPPING LIST';\n      modalNote.textContent =\n        'Congratulations! You have added the book to the shopping list. To delete, press the button “Remove from the shopping list”.';\n    } else {\n      btnAddEl.textContent = 'ADD TO SHOPPING LIST';\n      modalNote.textContent = ''; // Пустий текст, якщо книга не додана до списку покупок\n    }\n  } catch (error) {\n    currentBookData = {};\n  }\n}\n\nfunction loadData() {\n  const data = localStorage.getItem('shopping-list');\n\n  if (data) {\n    shoppingListData = JSON.parse(data);\n  }\n}\n\nfunction saveData(data) {\n  localStorage.setItem('shopping-list', JSON.stringify(data));\n}\n\nfunction onClickBtnAdd() {\n  if (currentBookData) {\n    const bookDataToStore = currentBookData;\n    const arrFromLocalStorage =\n      JSON.parse(localStorage.getItem('shopping-list')) || [];\n\n    const isBookInLocalStorage = arrFromLocalStorage.some(\n      item => item._id === bookDataToStore._id\n    );\n\n    if (!isBookInLocalStorage) {\n      arrFromLocalStorage.push(bookDataToStore);\n      localStorage.setItem(\n        'shopping-list',\n        JSON.stringify(arrFromLocalStorage)\n      );\n\n      document.querySelector('.modal-btn-add').textContent =\n        'REMOVE FROM THE SHOPPING LIST';\n\n      const modalNote = document.querySelector('.modal-note');\n      modalNote.textContent =\n        'Congratulations! You have added the book to the shopping list. To delete, press the button “Remove from the shopping list”.';\n    } else {\n      const filteredArr = arrFromLocalStorage.filter(\n        item => item._id !== bookDataToStore._id\n      );\n      localStorage.setItem('shopping-list', JSON.stringify(filteredArr));\n\n      document.querySelector('.modal-btn-add').textContent =\n        'ADD TO SHOPPING LIST';\n\n      const modalNote = document.querySelector('.modal-note');\n      modalNote.textContent = ''; // Пустий текст, якщо книга видалена зі списку покупок\n    }\n  } else {\n    const errorElement = document.querySelector('.error-message');\n    errorElement.textContent = 'Помилка: дані про книгу відсутні.';\n  }\n}\n\nlet isBookAddedToShoppingList = false;\n\nfunction openModal() {\n  backdrop.classList.remove('is-hidden');\n  modal.classList.remove('is-hidden');\n  disableBodyScroll();\n\n  if (isBookAddedToShoppingList) {\n    document.querySelector('.modal-btn-add').textContent =\n      'REMOVE FROM THE SHOPPING LIST';\n  } else {\n    document.querySelector('.modal-btn-add').textContent =\n      'ADD TO SHOPPING LIST';\n  }\n}\n\ncloseBtn.addEventListener('click', onBtnCloseClick);\nbackdrop.addEventListener('click', onBackdropClick);\ndocument.addEventListener('keydown', onEscapeKey);\n\nfunction onBtnCloseClick() {\n  closeModal();\n  enableBodyScroll();\n}\n\nfunction onBackdropClick(evt) {\n  if (evt.target === backdrop && evt.target !== modal) {\n    closeModal();\n  }\n}\n\nfunction onEscapeKey(evt) {\n  if (evt.key === 'Escape') {\n    closeModal();\n  }\n}\n\nfunction closeModal() {\n  modal.classList.add('is-hidden');\n  backdrop.classList.add('is-hidden');\n  enableBodyScroll();\n  document.removeEventListener('keydown', onEscapeKey);\n  backdrop.removeEventListener('click', onBackdropClick);\n}\n\nfunction markupModal(bookData) {\n  const { book_image, list_name, author, description, buy_links } = bookData;\n  const descriptionText = description || 'Description will be added soon ..';\n  return `<div class=\"modal-content\">\n      <img class=\"modal-book-img\"\n              src=\"${book_image}\"\n              alt=\"Book cover\"\n            />\n            <div class=\"modal-book-descr\">\n              <h2 class=\"modal-book-title\">${list_name}</h2>\n              <h3 class=\"modal-book-author\">${author}</h3>\n\n          <p class=\"modal-book-review\">${descriptionText}</p>\n        <ul class=\"modal-book-list list\">\n          <li class=\"modal-book-el\">\n            <a\n              href=\"${buy_links[0].url}\"\n              class=\"modal-book-link\"\n              target=\"_blank\"\n              rel=\"noopener no-referrer\"\n              >\n              <img\n              src=\"${shop1}\"\n              alt=\"Buy on Amazon\"\n              width=\"62\"\n              height=\"19\"\n              class=\"modal-book-seller amazon\"\n            /></a>\n          </li>\n          <li class=\"modal-book-el\">\n            <a\n              href=\"${buy_links[1].url}\"\n              class=\"modal-book-link\"\n              target=\"_blank\"\n              rel=\"noopener no-referrer\"\n              ><img\n              src=\"${shop2}\"\n              alt=\"Buy on Apple\"\n              width=\"33\"\n              height=\"32\"\n              class=\"modal-book-seller\"\n            /></a>\n          </li>\n          <li class=\"modal-book-el\">\n            <a\n              href=\"${buy_links[4].url}\"\n              class=\"modal-book-link\"\n              target=\"_blank\"\n              rel=\"noopener no-referrer\"\n            >\n              <img\n\n              src=\"${shop3}\"\n              alt=\"Book shop\"\n              width=\"38\"\n              height=\"36\"\n              class=\"modal-book-seller\"\n            /></a>\n          </li>\n        </ul>\n      </div>`;\n}\n","module.exports = require('./helpers/bundle-url').getBundleURL('9p9yL') + require('./helpers/bundle-manifest').resolve(\"aogqn\");","module.exports = require('./helpers/bundle-url').getBundleURL('9p9yL') + require('./helpers/bundle-manifest').resolve(\"4I5XU\");","module.exports = require('./helpers/bundle-url').getBundleURL('9p9yL') + require('./helpers/bundle-manifest').resolve(\"243JW\");","import { fetchCategoryList, fetchParticularCategory } from './service-api';\nimport { renderBestSellers } from './best-sellers';\n\nconst sideBarListEl = document.querySelector('.side-bar-list');\nconst booksContainerEl = document.querySelector('.books-container');\nconst bestSellersTitleEl = document.querySelector('.best-sellers > h2');\n\nlet currentCategory = 'All categories';\n\nstartRender();\nsideBarListEl.addEventListener('click', onRenderMarkup);\n\nasync function startRender() {\n  try {\n    const data = await fetchCategoryList();\n\n    const markupTitle = `<li><button class=\"side-bar-btn current-category\" type=\"button\" data-all_categories>All categories</button></li>`;\n    sideBarListEl.insertAdjacentHTML('afterbegin', markupTitle);\n\n    renderMarkupList(data);\n  } catch (err) {\n    alert('Something went wrong! Try reload the page!');\n  }\n}\n\nfunction renderMarkupList(arrays) {\n  const markup = arrays\n    .map(({ list_name }) => {\n      return `<li><button type=\"button\" class=\"side-bar-btn\">${list_name}</button></li>`;\n    })\n    .join('');\n  return sideBarListEl.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction onRenderMarkup(e) {\n  if (e.currentTarget === e.target) {\n    return;\n  }\n  if (e.target.textContent === currentCategory) {\n    return;\n  }\n\n  currentCategory = e.target.textContent;\n  const prevCurrentEl = document.querySelector('.current-category');\n\n  if (prevCurrentEl) {\n    prevCurrentEl.classList.remove('current-category');\n  }\n  e.target.classList.add('current-category');\n\n  if (e.target.dataset.all_categories === '') {\n    renderBestSellers();\n    return;\n  }\n\n  const titleEl = document.querySelector('.card-set-title');\n  const cardSetEl = document.createElement('ul');\n  cardSetEl.classList.add('card-set');\n  cardSetEl.classList.add('list');\n\n  currentCategory = e.target.textContent;\n\n  bestSellersTitleEl.innerHTML = '';\n  booksContainerEl.innerHTML = '';\n\n  const markupTitle = createMarkupTitle(currentCategory);\n  titleEl.innerHTML = markupTitle;\n\n  renderMarkupBook(currentCategory, cardSetEl);\n  booksContainerEl.append(cardSetEl);\n}\n\nasync function renderMarkupBook(category, cardSetEl) {\n  try {\n    const data = await fetchParticularCategory(category);\n\n    const markupBook = data\n      .map(({ book_image, title, author, _id }) => {\n        return `<li class=\"card-set-item\" data-id=\"${_id}\">\n\t <button class=\"card-set-btn\" type=\"button\"><div class=\"wrapper-img\"><img class=\"card-set-img\" src=\"${book_image}\" alt=\"\"></div>\n\t  <h4 class=\"card-set-book-title ellipsis\">${title}</h4>\n\t  <p class=\"card-set-author ellipsis\">${author}</p></button></li>`;\n      })\n      .join('');\n\n    cardSetEl.innerHTML = markupBook;\n  } catch (err) {\n    renderNoBooksError(cardSetEl);\n  }\n}\n\nfunction createMarkupTitle(category) {\n  const arrayWords = category.split(' ');\n  const numberWord = arrayWords.length - 1;\n  const notCompleteArr = arrayWords.slice(0, numberWord).join(' ');\n\n  return `${notCompleteArr} <span class=\"title-accent\">${arrayWords[numberWord]}</span>`;\n}\n\nfunction renderNoBooksError(container) {\n  const noBooksMessageElement = document.createElement('p');\n  noBooksMessageElement.classList.add('error-notification');\n  noBooksMessageElement.textContent = 'No books found';\n  container.appendChild(noBooksMessageElement);\n}\n","import { fetchCategoryList, fetchParticularCategory } from './service-api';\n\nconst booksContainerEl = document.querySelector('.books-container');\nconst bestSellersTitleEl = document.querySelector('.best-sellers > h2');\n\nrenderBestSellers();\n\nexport async function renderBestSellers() {\n  try {\n    const categoriesResp = await fetchCategoryList();\n\n    bestSellersTitleEl.innerHTML = createMarkupTitle();\n    booksContainerEl.innerHTML = '';\n\n    //Create categories list element\n    const categoriesListEl = document.createElement('ul');\n    categoriesListEl.classList.add('categories-list');\n    categoriesListEl.classList.add('list');\n\n    //Render all categories and all top books\n    categoriesResp.forEach(categoryResp => {\n      renderFullCategory(categoryResp.list_name, categoriesListEl);\n    });\n    booksContainerEl.append(categoriesListEl);\n  } catch (err) {\n    alert('Something went wrong! Try reload the page!');\n  }\n}\n\nasync function renderFullCategory(categoryName, categoriesListEl) {\n  //Create category element\n  const categoryElement = document.createElement('li');\n  categoryElement.classList.add('category');\n  categoryElement.classList.add('show-top');\n\n  renderCategoryTitleElement(categoryName, categoryElement);\n\n  // Get popular books for each category\n  try {\n    const booksByCategory = await fetchParticularCategory(categoryName);\n    if (booksByCategory.length > 0) {\n      const cardSetEl = document.createElement('ul');\n      cardSetEl.classList.add('card-set');\n      cardSetEl.classList.add('list');\n\n      //Render top books\n      const topBooksByCategory = booksByCategory.slice(0, 5);\n      topBooksByCategory.forEach(book => {\n        renderBookItemElement(book, cardSetEl);\n      });\n      categoryElement.appendChild(cardSetEl);\n\n      if (booksByCategory.length > 5) {\n        const seeMoreButtonElement = renderSeeMoreBtn(categoryElement);\n        const otherBooks = booksByCategory.slice(5);\n        seeMoreButtonElement.addEventListener(\n          'click',\n          onShowMoreBooks.bind(null, otherBooks, cardSetEl)\n        );\n      }\n    } else {\n      throw new Error();\n    }\n  } catch (err) {\n    renderNoBooksError(categoryElement);\n  }\n\n  categoriesListEl.appendChild(categoryElement);\n}\n\nfunction onShowMoreBooks(books, bookSetEl, event) {\n  const curCategoryEl = event.target.closest('.category');\n  curCategoryEl.classList.remove('show-top');\n\n  books.forEach(book => {\n    renderBookItemElement(book, bookSetEl);\n  });\n  event.currentTarget.remove();\n}\n\nfunction renderSeeMoreBtn(categoryContainer) {\n  const seeMoreButtonElement = document.createElement('button');\n  seeMoreButtonElement.classList.add('btn');\n  seeMoreButtonElement.classList.add('see-more-button');\n  seeMoreButtonElement.textContent = 'See More';\n  categoryContainer.appendChild(seeMoreButtonElement);\n  return seeMoreButtonElement;\n}\n\nfunction renderCategoryTitleElement(categoryName, categoryContainer) {\n  const categoryTitleElement = document.createElement('h3');\n  categoryTitleElement.textContent = categoryName;\n  categoryTitleElement.classList.add('category-title');\n  categoryContainer.appendChild(categoryTitleElement);\n}\n\nfunction renderBookItemElement({ book_image, title, author, _id }, bookSetEl) {\n  const markupBook = `\n  <li class=\"card-set-item\" data-id=\"${_id}\">\n\t  <button class=\"card-set-btn\" type=\"button\">\n      <div class=\"wrapper-img\">\n        <img class=\"card-set-img\" src=\"${book_image}\" alt=\"\">\n      </div>\n      <h4 class=\"card-set-book-title ellipsis\">${title}</h4>\n      <p class=\"card-set-author ellipsis\">${author}</p>\n    </button>\n  </li>`;\n  bookSetEl.insertAdjacentHTML('beforeend', markupBook);\n}\n\nfunction createMarkupTitle() {\n  return 'Best Sellers <span class=\"title-accent\">Books</span>';\n}\n\nfunction renderNoBooksError(container) {\n  const noBooksMessageElement = document.createElement('p');\n  noBooksMessageElement.classList.add('error-notification');\n  noBooksMessageElement.textContent = 'No books found';\n  container.appendChild(noBooksMessageElement);\n}\n"],"names":["parcelRequire","register","JSON","parse","$bpxeT","$b2e2324448c7ef9e$exports","getBundleURL","resolve","$a4825eca3462d444$exports","$04bc160e18781dbf$exports","$dae67d51b9dcdf97$var$currentBookData","$dae67d51b9dcdf97$var$closeBtn","document","querySelector","$dae67d51b9dcdf97$var$modal","$dae67d51b9dcdf97$var$backdrop","$dae67d51b9dcdf97$var$modalContent","addEventListener","event","bookElement","target","closest","bookId","getAttribute","$dae67d51b9dcdf97$var$_loadBookDetails","apply","this","arguments","$dae67d51b9dcdf97$var$loadBookDetails","evt","stopPropagation","data","$dae67d51b9dcdf97$var$enableBodyScroll","body","style","overflow","$parcel$interopDefault","$2TvXO","mark","_callee","bookData","shoppingList","isBookInShoppingList","modalHTML","btnAddEl","modalNote","$jos2x","fetchBookById","_ctx","sent","localStorage","getItem","some","item","_id","$dae67d51b9dcdf97$var$markupModal","innerHTML","classList","remove","$dae67d51b9dcdf97$var$openModal","$dae67d51b9dcdf97$var$closeModal","$dae67d51b9dcdf97$var$onEscapeKey","$dae67d51b9dcdf97$var$onClickBtnAdd","textContent","bookDataToStore","arrFromLocalStorage","filteredArr","filter","setItem","stringify","push","$dae67d51b9dcdf97$var$onBackdropClick","key","add","removeEventListener","book_image","list_name","author","description","buy_links","descriptionText","concat","url","$28d0b1bdee355282$var$booksContainerEl","$28d0b1bdee355282$var$bestSellersTitleEl","$28d0b1bdee355282$export$f9c8b3d3459f1865","$28d0b1bdee355282$var$_renderBestSellers","categoriesResp","categoriesListEl","fetchCategoryList","createElement","forEach","categoryResp","$28d0b1bdee355282$var$renderFullCategory","append","alert","categoryName","$28d0b1bdee355282$var$_renderFullCategory","categoryElement","booksByCategory","cardSetEl","seeMoreButtonElement","otherBooks","$28d0b1bdee355282$var$renderCategoryTitleElement","fetchParticularCategory","length","slice","book","$28d0b1bdee355282$var$renderBookItemElement","appendChild","$28d0b1bdee355282$var$renderSeeMoreBtn","$28d0b1bdee355282$var$onShowMoreBooks","bind","Error","$28d0b1bdee355282$var$renderNoBooksError","books","bookSetEl","currentTarget","categoryContainer","categoryTitleElement","param","title","markupBook","insertAdjacentHTML","container","noBooksMessageElement","$caacdd4bd33ef540$var$sideBarListEl","$caacdd4bd33ef540$var$booksContainerEl","$caacdd4bd33ef540$var$bestSellersTitleEl","$caacdd4bd33ef540$var$currentCategory","$caacdd4bd33ef540$var$_startRender","$caacdd4bd33ef540$var$renderMarkupList","arrays","markup","map","join","$caacdd4bd33ef540$var$_renderMarkupBook","category","$caacdd4bd33ef540$var$renderNoBooksError","$caacdd4bd33ef540$var$startRender","e","prevCurrentEl","dataset","all_categories","titleEl","markupTitle","arrayWords","split","numberWord","notCompleteArr","$caacdd4bd33ef540$var$renderMarkupBook","setActivePage"],"version":3,"file":"index.a9af30dd.js.map"}